<app-admin-header></app-admin-header>

<div class="registration-container">
  <div class="registration-card">
    <h2>{{ 'doctor_form.register_title' | transloco }}</h2>

    <form [formGroup]="doctorForm" (ngSubmit)="onSubmit()">
      <!-- Row 1 -->
      <div class="form-row">
        <!-- First Name -->
        <div class="form-group">
          <label for="firstName">{{ 'doctor_form.first_name' | transloco }} *</label>
          <input type="text" id="firstName" formControlName="firstName">
          <div *ngIf="formControls['firstName'].touched && formControls['firstName'].errors" class="error-message">
            <div *ngIf="formControls['firstName'].errors?.['required']">
              {{ 'validation.first_name_required' | transloco }}
            </div>
          </div>
        </div>

        <!-- Last Name -->
        <div class="form-group">
          <label for="lastName">{{ 'doctor_form.last_name' | transloco }} *</label>
          <input type="text" id="lastName" formControlName="lastName">
          <div *ngIf="formControls['lastName'].touched && formControls['lastName'].errors" class="error-message">
            <div *ngIf="formControls['lastName'].errors?.['required']">
              {{ 'validation.last_name_required' | transloco }}
            </div>
          </div>
        </div>
      </div>

      <!-- Row 2 -->
      <div class="form-row">
        <!-- Username -->
        <div class="form-group">
          <label for="username">{{ 'doctor_form.username' | transloco }} *</label>
          <input type="text" id="username" formControlName="username">
          <div *ngIf="formControls['username'].touched && formControls['username'].errors" class="error-message">
            <div *ngIf="formControls['username'].errors?.['required']">
              {{ 'validation.username_required' | transloco }}
            </div>
            <div *ngIf="formControls['username'].errors?.['minlength']">
              {{ 'validation.username_min_length' | transloco:{min: 4} }}
            </div>
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">{{ 'doctor_form.email' | transloco }} *</label>
          <input type="email" id="email" formControlName="email">
          <div *ngIf="formControls['email'].touched && formControls['email'].errors" class="error-message">
            <div *ngIf="formControls['email'].errors?.['required']">
              {{ 'validation.email_required' | transloco }}
            </div>
            <div *ngIf="formControls['email'].errors?.['email']">
              {{ 'validation.valid_email' | transloco }}
            </div>
          </div>
        </div>
      </div>

      <!-- Row 3 -->
      <div class="form-row">
        <!-- Phone -->
        <div class="form-group">
          <label for="phoneNumber">{{ 'doctor_form.phone' | transloco }} *</label>
          <input type="tel" id="phoneNumber" formControlName="phoneNumber">
          <div *ngIf="formControls['phoneNumber'].touched && formControls['phoneNumber'].errors" class="error-message">
            <div *ngIf="formControls['phoneNumber'].errors?.['required']">
              {{ 'validation.phone_required' | transloco }}
            </div>
            <div *ngIf="formControls['phoneNumber'].errors?.['pattern']">
              {{ 'validation.valid_phone' | transloco }}
            </div>
          </div>
        </div>

        <!-- Password -->
        <div class="form-group">
          <label for="password">{{ 'doctor_form.password' | transloco }} *</label>
          <input type="password" id="password" formControlName="password">
          <div *ngIf="formControls['password'].touched && formControls['password'].errors" class="error-message">
            <div *ngIf="formControls['password'].errors?.['required']">
              {{ 'validation.password_required' | transloco }}
            </div>
            <div *ngIf="formControls['password'].errors?.['minlength']">
              {{ 'validation.password_min_length' | transloco:{min: 6} }}
            </div>
          </div>
        </div>
      </div>

      <!-- Row 4 -->
      <div class="form-row">
        <!-- Date of Birth -->
        <div class="form-group">
          <label for="dateOfBirth">{{ 'doctor_form.dob' | transloco }} *</label>
          <input type="date" id="dateOfBirth" formControlName="dateOfBirth">
          <div *ngIf="formControls['dateOfBirth'].touched && formControls['dateOfBirth'].errors" class="error-message">
            {{ 'validation.dob_required' | transloco }}
          </div>
        </div>

        <!-- Gender -->
        <div class="form-group">
          <label for="genderId">{{ 'doctor_form.gender' | transloco }} *</label>
          <select id="genderId" formControlName="genderId">
            <option value="">{{ 'doctor_form.select_gender' | transloco }}</option>
            <option *ngFor="let gender of genders" [value]="gender.id">
              {{ getTranslatedName(gender) }}
            </option>
          </select>
          <div *ngIf="formControls['genderId'].touched && formControls['genderId'].errors" class="error-message">
            {{ 'validation.gender_required' | transloco }}
          </div>
        </div>
      </div>

      <!-- Row 5 -->
      <div class="form-row">
        <!-- Clinic -->
        <div class="form-group">
          <label for="clinicId">{{ 'doctor_form.clinic' | transloco }} *</label>
          <select id="clinicId" formControlName="clinicId">
            <option value="">{{ 'doctor_form.select_clinic' | transloco }}</option>
            <option *ngFor="let clinic of clinics" [value]="clinic.id">
              {{ clinic.name }}
            </option>
          </select>
          <div *ngIf="formControls['clinicId'].touched && formControls['clinicId'].errors" class="error-message">
            {{ 'validation.clinic_required' | transloco }}
          </div>
        </div>

        <!-- Specialization -->
        <div class="form-group">
          <label for="specializationId">{{ 'doctor_form.specialization' | transloco }} *</label>
          <select id="specializationId" formControlName="specializationId">
            <option value="">{{ 'doctor_form.select_specialization' | transloco }}</option>
            <option *ngFor="let spec of specializations" [value]="spec.id">
              {{ getTranslatedName(spec) }}
            </option>
          </select>
          <div *ngIf="formControls['specializationId'].touched && formControls['specializationId'].errors" class="error-message">
            {{ 'validation.specialization_required' | transloco }}
          </div>
        </div>
      </div>

      <!-- Row 6 -->
      <div class="form-row">
        <!-- Brief -->
        <div class="form-group full-width">
          <label for="brief">{{ 'doctor_form.brief' | transloco }} *</label>
          <textarea id="brief" formControlName="brief" rows="3"></textarea>
          <div *ngIf="formControls['brief'].touched && formControls['brief'].errors" class="error-message">
            {{ 'validation.brief_required' | transloco }}
          </div>
        </div>
      </div>

      <!-- Row 7 -->
      <div class="form-row">
        <!-- Check Price -->
        <div class="form-group">
          <label for="checkPrice">{{ 'doctor_form.check_price' | transloco }} *</label>
          <input type="number" id="checkPrice" formControlName="checkPrice" min="0">
          <div *ngIf="formControls['checkPrice'].touched && formControls['checkPrice'].errors" class="error-message">
            <div *ngIf="formControls['checkPrice'].errors?.['required']">
              {{ 'validation.price_required' | transloco }}
            </div>
            <div *ngIf="formControls['checkPrice'].errors?.['min']">
              {{ 'validation.valid_price' | transloco }}
            </div>
          </div>
        </div>

        <!-- Profile Picture -->
        <div class="form-group">
          <label for="profilePicture">{{ 'doctor_form.profile_picture' | transloco }}</label>
          <input type="file" id="profilePicture" (change)="onFileChange($event)" accept="image/*">
        </div>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button type="submit" [disabled]="doctorForm.invalid">
          {{ 'doctor_form.register_button' | transloco }}
        </button>
      </div>
    </form>
  </div>
</div>
